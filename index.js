import{a as _,S as F,j as x}from"./assets/vendor-Dy14UFr0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const h=document.querySelector("[data-menu-open]"),M=document.querySelector("[data-menu-close]"),q=document.querySelector("[data-menu]"),R=document.querySelectorAll(".mobile-menu__link");h&&q&&h.addEventListener("click",()=>{q.classList.add("is-open"),h.classList.add("is-active"),document.body.style.overflow="hidden"});M&&M.addEventListener("click",T);R.forEach(e=>{e.addEventListener("click",T)});function T(){q.classList.remove("is-open"),h.classList.remove("is-active"),document.body.style.overflow=""}const a={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .artist-loader__spinner"),artist:{name:document.querySelector(".modal__artist-name"),thumb:document.querySelector(".modal__artist-thumb"),years:document.querySelector(".modal__artist-years"),gender:document.querySelector(".modal__artist-gender"),members:document.querySelector(".modal__artist-members"),country:document.querySelector(".modal__artist-country"),bio:document.querySelector(".modal__artist-bio"),genres:document.querySelector(".modal__artist-genres")},albums:{container:document.querySelector(".modal__albums-container")},artistCardSection:document.querySelector(".modal__artist")};function k(){a.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll"),document.body.style.overflow="",document.documentElement.style.overflow="",document.removeEventListener("keydown",B)}function G(){const e=document.querySelector(".modal__close-btn"),t=document.querySelector(".modal");e&&e.addEventListener("click",k),t&&t.addEventListener("click",r=>{r.target===t&&k()})}function B(e){e.key==="Escape"&&!a.modal.classList.contains("modal--hidden")&&k()}async function K(e){if(!e)throw new Error("Artist ID is required");const[t,r]=await Promise.all([_.get(`https://sound-wave.b.goit.study/api/artists/${e}`),_.get("https://sound-wave.b.goit.study/api/artists")]),n=t.data,o=r.data.artists||[];if(!(n!=null&&n.strArtist))throw new Error("No artist data");const s=o.find(i=>i._id===e);return s?s.genres&&(n.genres=s.genres):console.warn("Artist not found ‚ùóÔ∏è:",e),n}function U(e){const t=Math.floor(e/1e3),r=Math.floor(t/60),n=t%60;return`${r}:${n.toString().padStart(2,"0")}`}function Y(e,t){return e.reduce((r,n)=>{if(n.strArtist!==t)return r;const o=n.strAlbum||"Unknown Album";return r[o]||(r[o]=[]),r[o].push(n),r},{})}const j="/artistsHUB-team-project/assets/icons-drmwNK9l.svg";function z(e,t){const r=a.albums.container;if(!r)return;const n=Y(e,t);r.innerHTML="";const o=document.createElement("ul");o.classList.add("modal__albums-list");for(const[s,i]of Object.entries(n)){const l=document.createElement("li");l.className="modal__album-item";const y=document.createElement("h4");y.className="modal__album-title",y.textContent=s,l.appendChild(y);const m=document.createElement("div");m.className="modal__tracks-wrapper";const f=document.createElement("ul");f.className="modal__tracks-header",f.innerHTML=`
      <li class="modal__track-name-col">track</li>
      <li class="modal__track-time-col">time</li>
      <li class="modal__track-link-col">link</li>
    `,m.appendChild(f),i.forEach(d=>{const u=document.createElement("ul");u.className="modal__track-item";const c=document.createElement("li");c.className="modal__track-name",c.textContent=d.strTrack||"";const b=document.createElement("li");b.className="modal__track-time",b.textContent=d.intDuration?U(d.intDuration):"";const S=document.createElement("li");if(S.className="modal__track-link",d.movie){const g=document.createElement("a");g.href=d.movie,g.target="_blank",g.rel="noopener noreferrer",g.innerHTML=`
        <svg width="16" height="16">
          <use href="${j}#icon-youtube"></use>
        </svg>`,S.appendChild(g)}u.append(c,b,S),m.appendChild(u)}),l.appendChild(m),o.appendChild(l)}r.appendChild(o)}function Q(e){const{name:t,thumb:r,years:n,gender:o,members:s,country:i,bio:l}=a.artist;t.textContent=e.strArtist??"No name",r.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",r.alt=`Artist photo ${e.strArtist??""}`,l.textContent=e.strBiographyEN??"No description",n.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",o.textContent=e.strGender||"No data",s.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function W(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(e.innerHTML="",t&&t.length>0)t.forEach(r=>{const n=document.createElement("span");n.classList.add("modal__genres-item"),n.textContent=r,e.appendChild(n)});else{const r=document.createElement("span");r.classList.add("modal__genres-item"),r.textContent="Genres not available",e.appendChild(r)}}function J(){if(!a.artistDataLoader||!a.artistCardSection){console.error("DOM references for loader are not found!");return}document.querySelector("#globalLoader").classList.remove("global-loader--hidden"),a.artistDataLoader.classList.remove("artist-loader--hidden"),a.artistDataLoader.classList.add("artist-loader--visible"),a.artistCardSection.classList.add("hidden")}function V(){if(!a.artistDataLoader||!a.artistCardSection){console.error("DOM references for loader are not found!");return}document.querySelector("#globalLoader").classList.add("global-loader--hidden"),a.artistDataLoader.classList.remove("artist-loader--visible"),a.artistDataLoader.classList.add("artist-loader--hidden"),a.artistCardSection.classList.remove("hidden")}const w={showArtistLoader:J,hideArtistLoader:V};async function X(e){try{w.showArtistLoader();const t=await K(e),r=t.genres||[];Z(),Q(t),z(t.tracksList,t.strArtist),W(a.artist.genres,r),w.hideArtistLoader(),a.modal.classList.remove("modal--hidden"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.addEventListener("keydown",B)}catch(t){console.error("Error to load artist data:",t.message,t),w.hideArtistLoader(),alert("Artist data not found"),k()}}function Z(){a.albums.container&&(a.albums.container.innerHTML=""),a.artist.genres&&(a.artist.genres.innerHTML="")}G();async function O(e=1){try{return(await _.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t.message)}}const E=document.querySelector(".artists__list");let C=0;ee();async function ee(){const e=await O(),t=H(e);E.innerHTML=t,C=1}const v=document.querySelector(".artists__load-more-btn");v.addEventListener("click",te);async function te(){try{N(!0),v.style.display="none",C+=1;const e=await O(C);e.length===0&&(v.style.display="none");const t=H(e),r=E.children.length;E.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{N(!1),v.style.display="flex"}}function re(e,t){if(typeof e!="string")return"";const r=window.innerWidth;return r<768?t=60:r<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function ne(e){return e.replace(/[,/]/g," ")}function H(e){return e.map(({_id:t,genres:r,strArtist:n,strArtistThumb:o,strBiographyEN:s})=>`
      <li class="artists__card">

        <img class="artists__card-image" src="${o}" alt="${n}"/>

        <ul class="artists__card-genres">
        ${r.map(i=>`<li class="artists__card-genre">${ne(i)}</li>`).join("")}
        </ul>
        <p class="artists__card-name">${n}</p>
        <p class="artists__card-description">${re(s,144)}</p>
       <button class="artists__card-btn open-artist-modal" data-artist-id="${t}">
       Learn More
        <svg class="artists__card-btn-icon" width="24" height="24">
            <use href="${j}#icon-caret-right"></use>
          </svg>
       </button>
     </li>
      `).join("")||""}E.addEventListener("click",oe);function oe(e){const t=e.target.closest(".open-artist-modal");if(t){const r=t.dataset.artistId;r?X(r):console.error("Artist ID not found üò±.")}}const D=document.querySelector(".loader");function N(e){e?D.style.display="inline-block":D.style.display="none"}const se="https://sound-wave.b.goit.study/api/feedbacks?limit=10&page=1";async function ae(e){try{return(await _.get(e)).data}catch(t){console.log(t)}}function ie(e){const t=e.map(n=>`
      <li class="swiper-slide item-feedback">
        <div class="stars-rating-feedback" data-rating="${Math.round(n.rating)}"></div>
        <p class="text-feedback">${n.descr}</p>
        <p class="text-name-feedback">${n.name}</p>
      </li>
    `).join(""),r=document.getElementById("card-list-feedback");r.innerHTML="",r.insertAdjacentHTML("beforeend",t)}function ce(){return new F(".feedback-swiper",{slidesPerView:1,spaceBetween:24,loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,renderBullet(e,t){return e===0?`<span class="${t} pagination-start"></span>`:e===9?`<span class="${t} pagination-end"></span>`:`<span class="${t} pagination-middle"></span>`}}})}function le(){document.querySelectorAll(".stars-rating-feedback").forEach(t=>{const r=Number(t.dataset.rating);$(t).raty({score:r,readOnly:!0,half:!1,starType:"i"})})}ae(se).then(e=>{const t=e.data;!t||t.length===0||(ie(t),le(),ce())}).catch(e=>console.log(e));function de(){document.body.classList.add("body-no-scroll")}function ue(){document.body.classList.remove("body-no-scroll")}function A(e,t){e.classList.add("feedback-error");let r=e.parentElement.querySelector(".feedback-error-text");r||(r=document.createElement("div"),r.className="feedback-error-text",e.parentElement.appendChild(r)),r.textContent=t}function I(e){e.classList.remove("feedback-error");const t=e.parentElement.querySelector(".feedback-error-text");t&&t.remove()}function P(){document.querySelectorAll(".feedback-error").forEach(t=>{I(t)});const e=document.querySelector(".server-error-message");e&&e.remove()}const p=document.querySelector(".js-feedback-backdrop");function me(){p.removeAttribute("hidden"),de(),P()}function L(){p.setAttribute("hidden",""),ue()}function fe(){const e=document.querySelector(".js-feedback-close");!p||!e||(e.addEventListener("click",L),p.addEventListener("click",t=>{t.target===p&&L()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&!p.hasAttribute("hidden")&&L()}))}function pe(){const e=document.querySelector(".feedback-btn");e&&e.addEventListener("click",t=>{t.preventDefault(),me()})}function ye(){const e=document.querySelector(".rating");if(!e)return;const t=e.querySelectorAll(".rating-star"),r=document.getElementById("rating-input");t.forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const s=Number(n.dataset.value);r.value=s,t.forEach(i=>{i.classList.toggle("active",Number(i.dataset.value)<=s)}),I(e)})})}function be(){const e=document.querySelector(".js-feedback-form");if(!e)return;const t=e.querySelector('[name="name"]'),r=e.querySelector('[name="message"]'),n=document.getElementById("rating-input"),o=e.querySelector(".rating"),s=e.querySelector(".feedback-submit-btn"),i=e.querySelector(".js-submit-text"),l=e.querySelector(".js-submit-loader");e.addEventListener("submit",async y=>{y.preventDefault(),P();const m=t.value.trim(),f=r.value.trim(),d=Number(n.value);let u=!0;if(m||(A(t,"–Ü–º º—è –æ–±–æ–≤ º—è–∑–∫–æ–≤–µ"),u=!1),(!f||f.length<10)&&(A(r,"–ú—ñ–Ω—ñ–º—É–º 10 —Å–∏–º–≤–æ–ª—ñ–≤"),u=!1),(d<1||d>5)&&(A(o,"–û–±–µ—Ä—ñ—Ç—å —Ä–µ–π—Ç–∏–Ω–≥"),u=!1),!!u){s.disabled=!0,i.hidden=!0,l.hidden=!1;try{if(!(await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:m,rating:d,descr:f})})).ok)throw new Error("Server error");e.reset(),n.value="0",document.querySelectorAll(".rating-star").forEach(b=>b.classList.remove("active")),L(),alert("–î—è–∫—É—î–º–æ –∑–∞ –≤—ñ–¥–≥—É–∫!")}catch{const c=document.createElement("div");c.className="server-error-message",c.textContent="–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏",c.style.color="#dc2626",c.style.textAlign="center",c.style.marginTop="16px",e.appendChild(c),setTimeout(()=>c.remove(),5e3)}finally{s.disabled=!1,i.hidden=!1,l.hidden=!0}}})}document.addEventListener("DOMContentLoaded",()=>{fe(),pe(),ye(),be()});window.$=x;window.jQuery=x;
//# sourceMappingURL=index.js.map
