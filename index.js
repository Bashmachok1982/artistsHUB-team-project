import{a as L,S as B,j as D}from"./assets/vendor-Dy14UFr0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const h=document.querySelector("[data-menu-open]"),M=document.querySelector("[data-menu-close]"),q=document.querySelector("[data-menu]"),H=document.querySelectorAll(".mobile-menu__link");h&&q&&h.addEventListener("click",()=>{q.classList.add("is-open"),h.classList.add("is-active"),document.body.style.overflow="hidden"});M&&M.addEventListener("click",x);H.forEach(e=>{e.addEventListener("click",x)});function x(){q.classList.remove("is-open"),h.classList.remove("is-active"),document.body.style.overflow=""}const s={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .artist-loader__spinner"),artist:{name:document.querySelector(".modal__artist-name"),thumb:document.querySelector(".modal__artist-thumb"),years:document.querySelector(".modal__artist-years"),gender:document.querySelector(".modal__artist-gender"),members:document.querySelector(".modal__artist-members"),country:document.querySelector(".modal__artist-country"),bio:document.querySelector(".modal__artist-bio"),genres:document.querySelector(".modal__artist-genres")},albums:{container:document.querySelector(".modal__albums-container")},artistCardSection:document.querySelector(".modal__artist")};function _(){s.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll"),document.body.style.overflow="",document.documentElement.style.overflow="",document.removeEventListener("keydown",T)}function I(){const e=document.querySelector(".modal__close-btn"),t=document.querySelector(".modal");e&&e.addEventListener("click",_),t&&t.addEventListener("click",r=>{r.target===t&&_()})}function T(e){e.key==="Escape"&&!s.modal.classList.contains("modal--hidden")&&_()}async function P(e){if(!e)throw new Error("Artist ID is required");const[t,r]=await Promise.all([L.get(`https://sound-wave.b.goit.study/api/artists/${e}`),L.get("https://sound-wave.b.goit.study/api/artists")]),o=t.data,n=r.data.artists||[];if(!(o!=null&&o.strArtist))throw new Error("No artist data");const a=n.find(i=>i._id===e);return a?a.genres&&(o.genres=a.genres):console.warn("Artist not found â—ï¸:",e),o}function F(e){const t=Math.floor(e/1e3),r=Math.floor(t/60),o=t%60;return`${r}:${o.toString().padStart(2,"0")}`}function R(e,t){return e.reduce((r,o)=>{if(o.strArtist!==t)return r;const n=o.strAlbum||"Unknown Album";return r[n]||(r[n]=[]),r[n].push(o),r},{})}function z(e,t){const r=s.albums.container;if(!r)return;const o=R(e,t);r.innerHTML="";const n=document.createElement("ul");n.classList.add("modal__albums-list");for(const[a,i]of Object.entries(o)){const l=document.createElement("li");l.className="modal__album-item";const m=document.createElement("h4");m.className="modal__album-title",m.textContent=a,l.appendChild(m);const d=document.createElement("div");d.className="modal__tracks-wrapper";const f=document.createElement("ul");f.className="modal__tracks-header",f.innerHTML=`
      <li class="modal__track-name-col">track</li>
      <li class="modal__track-time-col">time</li>
      <li class="modal__track-link-col">link</li>
    `,d.appendChild(f),i.forEach(c=>{const g=document.createElement("ul");g.className="modal__track-item";const y=document.createElement("li");y.className="modal__track-name",y.textContent=c.strTrack||"";const u=document.createElement("li");u.className="modal__track-time",u.textContent=c.intDuration?F(c.intDuration):"";const b=document.createElement("li");if(b.className="modal__track-link",c.movie){const p=document.createElement("a");p.href=c.movie,p.target="_blank",p.rel="noopener noreferrer",p.innerHTML=`
        <svg width="16" height="16">
          <use href="./img/icons.svg#icon-youtube"></use>
        </svg>`,b.appendChild(p)}g.append(y,u,b),d.appendChild(g)}),l.appendChild(d),n.appendChild(l)}r.appendChild(n)}function G(e){const{name:t,thumb:r,years:o,gender:n,members:a,country:i,bio:l}=s.artist;t.textContent=e.strArtist??"No name",r.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",r.alt=`Artist photo ${e.strArtist??""}`,l.textContent=e.strBiographyEN??"No description",o.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",n.textContent=e.strGender||"No data",a.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function Y(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(e.innerHTML="",t&&t.length>0)t.forEach(r=>{const o=document.createElement("span");o.classList.add("modal__genres-item"),o.textContent=r,e.appendChild(o)});else{const r=document.createElement("span");r.classList.add("modal__genres-item"),r.textContent="Genres not available",e.appendChild(r)}}function K(){if(!s.artistDataLoader||!s.artistCardSection){console.error("DOM references for loader are not found!");return}document.querySelector("#globalLoader").classList.remove("global-loader--hidden"),s.artistDataLoader.classList.remove("artist-loader--hidden"),s.artistDataLoader.classList.add("artist-loader--visible"),s.artistCardSection.classList.add("hidden")}function Q(){if(!s.artistDataLoader||!s.artistCardSection){console.error("DOM references for loader are not found!");return}document.querySelector("#globalLoader").classList.add("global-loader--hidden"),s.artistDataLoader.classList.remove("artist-loader--visible"),s.artistDataLoader.classList.add("artist-loader--hidden"),s.artistCardSection.classList.remove("hidden")}const E={showArtistLoader:K,hideArtistLoader:Q};async function W(e){try{E.showArtistLoader();const t=await P(e),r=t.genres||[];J(),G(t),z(t.tracksList,t.strArtist),Y(s.artist.genres,r),E.hideArtistLoader(),s.modal.classList.remove("modal--hidden"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.addEventListener("keydown",T)}catch(t){console.error("Error to load artist data:",t.message,t),E.hideArtistLoader(),alert("Artist data not found"),_()}}function J(){s.albums.container&&(s.albums.container.innerHTML=""),s.artist.genres&&(s.artist.genres.innerHTML="")}I();async function j(e=1){try{return(await L.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t.message)}}const k=document.querySelector(".artists__list");let A=0;U();async function U(){const e=await j(),t=O(e);k.innerHTML=t,A=1}const v=document.querySelector(".artists__load-more-btn");v.addEventListener("click",V);async function V(){try{N(!0),v.style.display="none",A+=1;const e=await j(A);e.length===0&&(v.style.display="none");const t=O(e),r=k.children.length;k.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{N(!1),v.style.display="flex"}}function X(e,t){if(typeof e!="string")return"";const r=window.innerWidth;return r<768?t=60:r<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function Z(e){return e.replace(/[,/]/g," ")}function O(e){return e.map(({_id:t,genres:r,strArtist:o,strArtistThumb:n,strBiographyEN:a})=>`
      <li class="artists__card">

        <img class="artists__card-image" src="${n}" alt="${o}"/>

        <ul class="artists__card-genres">
        ${r.map(i=>`<li class="artists__card-genre">${Z(i)}</li>`).join("")}
        </ul>
        <p class="artists__card-name">${o}</p>
        <p class="artists__card-description">${X(a,144)}</p>
       <button class="artists__card-btn open-artist-modal" data-artist-id="${t}">
       Learn More
        <svg class="artists__card-btn-icon" width="24" height="24" >
        <use href="img/icons.svg#icon-caret-right"></use>
        </svg>
       </button>
     </li>
      `).join("")||""}k.addEventListener("click",ee);function ee(e){const t=e.target.closest(".open-artist-modal");if(t){const r=t.dataset.artistId;r?W(r):console.error("Artist ID not found ðŸ˜±.")}}const C=document.querySelector(".loader");function N(e){e?C.style.display="inline-block":C.style.display="none"}const te="https://sound-wave.b.goit.study/api/feedbacks?limit=10&page=1";async function re(e){try{return(await L.get(e)).data}catch(t){console.log(t)}}function ne(e){const t=e.map(o=>`
      <li class="swiper-slide item-feedback">
        <div class="stars-rating-feedback" data-rating="${Math.round(o.rating)}"></div>
        <p class="text-feedback">${o.descr}</p>
        <p class="text-name-feedback">${o.name}</p>
      </li>
    `).join(""),r=document.getElementById("card-list-feedback");r.innerHTML="",r.insertAdjacentHTML("beforeend",t)}function oe(){return new B(".feedback-swiper",{slidesPerView:1,spaceBetween:24,loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,renderBullet(e,t){return e===0?`<span class="${t} pagination-start"></span>`:e===9?`<span class="${t} pagination-end"></span>`:`<span class="${t} pagination-middle"></span>`}}})}function ae(){document.querySelectorAll(".stars-rating-feedback").forEach(t=>{const r=Number(t.dataset.rating);$(t).raty({score:r,readOnly:!0,half:!1,starType:"i"})})}re(te).then(e=>{const t=e.data;!t||t.length===0||(ne(t),ae(),oe())}).catch(e=>console.log(e));function se(){const e=document.querySelector(".rating");if(!e)return;const t=e.querySelectorAll(".rating-star"),r=document.querySelector("#rating-input");!t.length||!r||e.dataset.initialized!=="true"&&(e.dataset.initialized="true",t.forEach(o=>{o.addEventListener("click",()=>{const n=Number(o.dataset.value);r.value=n,t.forEach(a=>{const i=Number(a.dataset.value);a.classList.toggle("active",i<=n)})})}))}function w(e,t){e.classList.add("feedback-error");let r=e.parentElement.querySelector(".feedback-error-text");r||(r=document.createElement("div"),r.className="feedback-error-text",e.parentElement.appendChild(r)),r.textContent=t}function S(e){e.classList.remove("feedback-error");const t=e.parentElement.querySelector(".feedback-error-text");t&&t.remove()}function ie(){const e=document.querySelector(".js-feedback-form");if(!e)return;const t=e.querySelector('input[name="name"]'),r=e.querySelector('textarea[name="message"]'),o=e.querySelector("#rating-input"),n=e.querySelector(".rating"),a=e.querySelector(".js-submit-text"),i=e.querySelector(".js-submit-loader");e.addEventListener("submit",async l=>{var y;l.preventDefault();const m=t.value.trim(),d=r.value.trim(),f=Number(o.value);S(t),S(r),S(n);let c=!1;if((m.length<2||m.length>16)&&(w(t,"Name must be 2â€“16 characters"),c=!0),(d.length<10||d.length>512)&&(w(r,"Message must be 10â€“512 characters"),c=!0),(f<1||f>5)&&(w(n,"Please select a rating"),c=!0),c)return;const g={name:m,rating:f,descr:d};a.hidden=!0,i.hidden=!1;try{const u=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(g)});if(!u.ok)return;const b=await u.json();e.reset(),o.value=0,document.querySelectorAll(".rating-star").forEach(p=>p.classList.remove("active")),(y=window.feedbackModal)!=null&&y.close&&window.feedbackModal.close()}catch(u){console.log("âŒ Network error:",u)}finally{a.hidden=!1,i.hidden=!0}})}function ce(){document.body.classList.add("body-no-scroll")}function le(){document.body.classList.remove("body-no-scroll")}function de(){const e=document.querySelector(".js-feedback-backdrop"),t=document.querySelector(".feedback-modal"),r=document.querySelector(".js-feedback-close");if(!e||!t||!r)return;function o(){e.hidden=!1,ce()}function n(){e.hidden=!0,le()}r.addEventListener("click",n),e.addEventListener("click",a=>{a.target===e&&n()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&n()}),window.feedbackModal={open:o,close:n}}document.addEventListener("DOMContentLoaded",()=>{de(),se(),ie()});window.$=D;window.jQuery=D;
//# sourceMappingURL=index.js.map
